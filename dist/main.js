(()=>{"use strict";var t=function(t,e){t.style.color=e},e=function(t,e){var n=document.getElementById("thanks").childNodes[3].childNodes[3],o=n.childNodes[1],c=n.childNodes[3];o.textContent=t,c.innerHTML=e};var n,o,c,r,s,l,a,i,u,d,m,f,p,y,v,h,b,g,E;h=document.querySelector(".club-select"),document.querySelector(".head-main"),b=h.querySelector(".club-variants"),g=0,E=function t(){v=requestAnimationFrame(t),(g+=.1)<=1?b.style.opacity="".concat(g):(cancelAnimationFrame(v),g=0)},document.addEventListener("click",(function(t){var e=t.target;e.closest(".club-select")&&!e.matches(".club-variants, .club-item")?(b.classList.toggle("visible"),E()):null===e.closest(".club-variants")&&b.classList.remove("visible")})),m=document.querySelector(".header-main"),f=document.querySelectorAll(".popup"),p=document.querySelector(".fixed-gift"),y=document.querySelector(".popup-menu"),m.addEventListener("click",(function(t){var e,n=t.target;n.getAttribute("data-popup")&&(e=n.getAttribute("data-popup").substr(1),document.getElementById("".concat(e)).classList.add("visible")),n.closest(".menu-button")&&(y.style.transform="translateX(0)"),n.closest(".close-menu-btn")&&(y.style.transform="translateX(100%)")})),f.forEach((function(t){return t.addEventListener("click",(function(t){var e=t.target;!e.matches(".close_icon, .close-btn")&&e.closest(".form-content")||e.closest(".popup").classList.remove("visible")}))})),p&&p.addEventListener("click",(function(t){f[3].classList.toggle("visible"),p.style.display="none"})),document.addEventListener("submit",(function(n){if(null!==n.target.closest("form")){n.preventDefault();var o=n.target.closest("form").querySelectorAll("input"),c=n.target.closest("form").querySelector('input[type="checkbox"]');c&&!1===c.checked?t(c.nextSibling,"red"):(c&&t(c.nextSibling,""),function(t){var n,o;n=t,o=document.getElementById("thanks"),n.closest(".popup")&&n.closest(".popup").classList.remove("visible"),o.classList.add("visible"),e("Загрузка","Отправляем данные...");var c=new FormData(t),r={};c.forEach((function(t,e){r[e]=t})),function(t){return fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"})}(r).then((function(t){if(200!==t.status)throw new Error("Status network not 200");e("Спасибо","Ваша заявка отправлена.\n          <br>\n          Мы свяжемся с вами в ближайшее время.")})).catch((function(){e("Ошибка","Что-то пошло не так :(")}))}(n.target.closest("form")),o.forEach((function(t){"text"!==t.type&&"tel"!==t.type||(t.value=""),"checkbox"===t.type&&(t.checked=!1)})))}})),n={1:"1999",6:"9900",9:"13990",12:"19900"},o={1:"2999",6:"14990",9:"21990",12:"24990"},c=document.querySelectorAll('input[name="card-type"]'),r=document.querySelectorAll("[data-club]"),s=document.getElementById("card_order"),l=document.getElementById("price-total"),a=document.getElementById("promo"),i=function(t,e,n){Object.keys(t).map((function(o){e===o&&(l.textContent=Math.floor(+t[o]*n))}))},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r.forEach((function(c,r){c.checked&&(0===r&&i(n,t,e),1===r&&i(o,t,e))}))},d=function(t){c.forEach((function(e){e.checked&&u(e.value,t)}))},s.addEventListener("input",(function(t){var e=t.target;e.matches("[data-price]")&&u(e.value),e.matches("[data-club]")&&d(),"ТЕЛО2019"===a.value&&d(.7)})),function(){var t=document.getElementById("totop"),e=document.querySelector(".popup-menu"),n=document.querySelector(".top-menu"),o=function(t){var e=t.getAttribute("href").substr(1);document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"})};document.addEventListener("scroll",(function(){var e=window.scrollY;e>300&&(n.style.position="fixed",n.style.transform="translateY(-100%)"),e<300&&(n.style.transition="",n.style.position="",n.style.transform="translateY(0%)"),e>586?(n.style.transition="transform .15s linear",n.style.transform="translateY(0%)",t.style.transform="translateY(0%)"):t.style.transform="translateY(45px)"})),document.addEventListener("click",(function(t){var n=t.target;n.matches("[data-scroll]")&&(t.preventDefault(),o(n),e.style.transform="translateX(100%)"),n.closest("#totop")&&(t.preventDefault(),o(n.closest("#totop")))}))}()})();