(()=>{"use strict";var e=function(e,t){e.style.color=t},t=function(e,t){var c=document.getElementById("thanks").childNodes[3].childNodes[3],n=c.childNodes[1],o=c.childNodes[3];n.textContent=e,o.innerHTML=t};var c,n,o,s,i,r,l,a;i=document.querySelector(".club-select"),document.querySelector(".head-main"),r=i.querySelector(".club-variants"),l=0,a=function e(){s=requestAnimationFrame(e),(l+=.1)<=1?r.style.opacity="".concat(l):(cancelAnimationFrame(s),l=0)},document.addEventListener("click",(function(e){var t=e.target;t.closest(".club-select")&&!t.matches(".club-variants, .club-item")?(r.classList.toggle("visible"),a()):null===t.closest(".club-variants")&&r.classList.remove("visible")})),c=document.querySelector(".head"),n=document.querySelectorAll(".popup"),o=document.querySelector(".fixed-gift"),c.addEventListener("click",(function(e){var t,c=e.target;c.getAttribute("data-popup")&&(t=c.getAttribute("data-popup").substr(1),document.getElementById("".concat(t)).classList.add("visible"))})),n.forEach((function(e){return e.addEventListener("click",(function(e){var t=e.target;!t.matches(".close_icon, .close-btn")&&t.closest(".form-content")||t.closest(".popup").classList.remove("visible")}))})),o.addEventListener("click",(function(e){n[3].classList.toggle("visible"),o.style.display="none"})),document.addEventListener("submit",(function(c){if(null!==c.target.closest("form")){c.preventDefault();var n=c.target.closest("form").querySelectorAll("input"),o=c.target.closest("form").querySelector('input[type="checkbox"]');o&&!1===o.checked?e(o.nextSibling,"red"):(o&&e(o.nextSibling,""),function(e){var c,n;c=e,n=document.getElementById("thanks"),c.closest(".popup")&&c.closest(".popup").classList.remove("visible"),n.classList.add("visible"),t("Загрузка","Отправляем данные...");var o=new FormData(e),s={};o.forEach((function(e,t){s[t]=e})),function(e){return fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}(s).then((function(e){if(200!==e.status)throw new Error("Status network not 200");t("Спасибо","Ваша заявка отправлена.\n          <br>\n          Мы свяжемся с вами в ближайшее время.")})).catch((function(){t("Ошибка","Что-то пошло не так :(")}))}(c.target.closest("form")),n.forEach((function(e){"text"!==e.type&&"tel"!==e.type||(e.value=""),"checkbox"===e.type&&(e.checked=!1)})))}}))})();