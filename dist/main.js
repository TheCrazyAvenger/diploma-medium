(()=>{"use strict";var t=function(t,e){t.style.color=e},e=function(t,e){var n=document.getElementById("thanks").childNodes[3].childNodes[3],c=n.childNodes[1],o=n.childNodes[3];c.textContent=t,o.innerHTML=e};var n,c,o,r,l,a,s,i,u,d,m,f,p,v,h,y,b,g,E,k;b=document.querySelector(".club-select"),document.querySelector(".head-main"),g=b.querySelector(".club-variants"),E=0,k=function t(){y=requestAnimationFrame(t),(E+=.1)<=1?g.style.opacity="".concat(E):(cancelAnimationFrame(y),E=0)},document.addEventListener("click",(function(t){var e=t.target;e.closest(".club-select")&&!e.matches(".club-variants, .club-item")?(g.classList.toggle("visible"),k()):null===e.closest(".club-variants")&&g.classList.remove("visible")})),p=document.querySelector(".head"),v=document.querySelectorAll(".popup"),h=document.querySelector(".fixed-gift"),p.addEventListener("click",(function(t){var e,n=t.target;n.getAttribute("data-popup")&&(e=n.getAttribute("data-popup").substr(1),document.getElementById("".concat(e)).classList.add("visible"))})),v.forEach((function(t){return t.addEventListener("click",(function(t){var e=t.target;!e.matches(".close_icon, .close-btn")&&e.closest(".form-content")||e.closest(".popup").classList.remove("visible")}))})),h&&h.addEventListener("click",(function(t){v[3].classList.toggle("visible"),h.style.display="none"})),document.addEventListener("submit",(function(n){if(null!==n.target.closest("form")){n.preventDefault();var c=n.target.closest("form").querySelectorAll("input"),o=n.target.closest("form").querySelector('input[type="checkbox"]');o&&!1===o.checked?t(o.nextSibling,"red"):(o&&t(o.nextSibling,""),function(t){var n,c;n=t,c=document.getElementById("thanks"),n.closest(".popup")&&n.closest(".popup").classList.remove("visible"),c.classList.add("visible"),e("Загрузка","Отправляем данные...");var o=new FormData(t),r={};o.forEach((function(t,e){r[e]=t})),function(t){return fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"})}(r).then((function(t){if(200!==t.status)throw new Error("Status network not 200");e("Спасибо","Ваша заявка отправлена.\n          <br>\n          Мы свяжемся с вами в ближайшее время.")})).catch((function(){e("Ошибка","Что-то пошло не так :(")}))}(n.target.closest("form")),c.forEach((function(t){"text"!==t.type&&"tel"!==t.type||(t.value=""),"checkbox"===t.type&&(t.checked=!1)})))}})),o={1:"1999",6:"9900",9:"13990",12:"19900"},r={1:"2999",6:"14990",9:"21990",12:"24990"},l=document.querySelectorAll('input[name="card-type"]'),a=document.querySelectorAll("[data-club]"),s=document.getElementById("card_order"),i=document.getElementById("price-total"),u=document.getElementById("promo"),d=function(t,e,n){Object.keys(t).map((function(c){e===c&&(i.textContent=Math.floor(+t[c]*n))}))},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.forEach((function(n,c){n.checked&&(0===c&&d(o,t,e),1===c&&d(r,t,e))}))},f=function(t){l.forEach((function(e){e.checked&&m(e.value,t)}))},s.addEventListener("input",(function(t){var e=t.target;e.matches("[data-price]")&&m(e.value),e.matches("[data-club]")&&f(),"ТЕЛО2019"===u.value&&f(.7)})),n=document.getElementById("totop"),c=function(t){var e=t.getAttribute("href").substr(1);document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"})},document.addEventListener("scroll",(function(){var t=window.scrollY;n.style.transform=t>700?"translateY(0)":"translateY(45px)"})),document.addEventListener("click",(function(t){var e=t.target;e.matches("[data-scroll]")&&(t.preventDefault(),c(e)),e.closest("#totop")&&(t.preventDefault(),c(e.closest("#totop")))}))})();