(()=>{"use strict";var e=function(e,t){e.style.color=t},t=function(e,t){var c=document.getElementById("thanks").childNodes[3].childNodes[3],n=c.childNodes[1],o=c.childNodes[3];n.textContent=e,o.innerHTML=t};var c,n,o,r,i,l,a,s,u,d,m,f,p,v,h,y,b,g;h=document.querySelector(".club-select"),document.querySelector(".head-main"),y=h.querySelector(".club-variants"),b=0,g=function e(){v=requestAnimationFrame(e),(b+=.1)<=1?y.style.opacity="".concat(b):(cancelAnimationFrame(v),b=0)},document.addEventListener("click",(function(e){var t=e.target;t.closest(".club-select")&&!t.matches(".club-variants, .club-item")?(y.classList.toggle("visible"),g()):null===t.closest(".club-variants")&&y.classList.remove("visible")})),m=document.querySelector(".head"),f=document.querySelectorAll(".popup"),p=document.querySelector(".fixed-gift"),m.addEventListener("click",(function(e){var t,c=e.target;c.getAttribute("data-popup")&&(t=c.getAttribute("data-popup").substr(1),document.getElementById("".concat(t)).classList.add("visible"))})),f.forEach((function(e){return e.addEventListener("click",(function(e){var t=e.target;!t.matches(".close_icon, .close-btn")&&t.closest(".form-content")||t.closest(".popup").classList.remove("visible")}))})),p&&p.addEventListener("click",(function(e){f[3].classList.toggle("visible"),p.style.display="none"})),document.addEventListener("submit",(function(c){if(null!==c.target.closest("form")){c.preventDefault();var n=c.target.closest("form").querySelectorAll("input"),o=c.target.closest("form").querySelector('input[type="checkbox"]');o&&!1===o.checked?e(o.nextSibling,"red"):(o&&e(o.nextSibling,""),function(e){var c,n;c=e,n=document.getElementById("thanks"),c.closest(".popup")&&c.closest(".popup").classList.remove("visible"),n.classList.add("visible"),t("Загрузка","Отправляем данные...");var o=new FormData(e),r={};o.forEach((function(e,t){r[t]=e})),function(e){return fetch("../server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}(r).then((function(e){if(200!==e.status)throw new Error("Status network not 200");t("Спасибо","Ваша заявка отправлена.\n          <br>\n          Мы свяжемся с вами в ближайшее время.")})).catch((function(){t("Ошибка","Что-то пошло не так :(")}))}(c.target.closest("form")),n.forEach((function(e){"text"!==e.type&&"tel"!==e.type||(e.value=""),"checkbox"===e.type&&(e.checked=!1)})))}})),c={1:"1999",6:"9900",9:"13990",12:"19900"},n={1:"2999",6:"14990",9:"21990",12:"24990"},o=document.querySelectorAll('input[name="card-type"]'),r=document.querySelectorAll("[data-club]"),i=document.getElementById("card_order"),l=document.getElementById("price-total"),a=document.getElementById("promo"),s=function(e,t,c){Object.keys(e).map((function(n){t===n&&(l.textContent=Math.floor(+e[n]*c))}))},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r.forEach((function(o,r){o.checked&&(0===r&&s(c,e,t),1===r&&s(n,e,t))}))},d=function(e){o.forEach((function(t){t.checked&&u(t.value,e)}))},i.addEventListener("input",(function(e){var t=e.target;t.matches("[data-price]")&&u(t.value),t.matches("[data-club]")&&d(),"ТЕЛО2019"===a.value&&d(.7)}))})();